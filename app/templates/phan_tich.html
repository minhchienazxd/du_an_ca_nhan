<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√¢n T√≠ch SXMB - Trang Ch·ªß</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='phan_tich.css') }}">
</head>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <h1>Ph√¢n T√≠ch SXMB</h1>
                </div>
                <div id="current-date" style="font-size: 0.9rem;"></div>
            </div>
        </div>
    </header>

    <div class="container">
        <nav class="nav-tabs">
            <button class="tab-btn active" onclick="showSection('cham')">
                <i class="fas fa-fire"></i> Ch·∫°m
            </button>
            <button class="tab-btn" onclick="showSection('tong_lo')">
                <i class="fas fa-calculator"></i> T·ªïng l√¥
            </button>
            <button class="tab-btn" onclick="showSection('lo_roi')">
                <i class="fas fa-sync-alt"></i> L√¥ r∆°i
            </button>
            <button class="tab-btn" onclick="showSection('cau_ngang')">
                <i class="fas fa-arrows-alt-h"></i> C·∫ßu ngang
            </button>
            <button class="tab-btn" onclick="showSection('cau_cheo')">
                <i class="fas fa-arrows-alt"></i> C·∫ßu ch√©o
            </button>
            <button class="tab-btn" onclick="showSection('phan_tich_thu')">
                <i class="fas fa-calendar"></i> Theo th·ª©
            </button>
            <button class="tab-btn" onclick="showSection('lap_deu')">
                <i class="fas fa-redo"></i> L·∫∑p ƒë·ªÅu
            </button>
        </nav>

        <main>
            <!-- CH·∫†M -->
            <section id="cham" class="section active">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-fire"></i> Ph√¢n t√≠ch Ch·∫°m</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="cham">
                    <button type="button" class="btn" onclick="analyze('cham')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch Ch·∫°m</button>
                </form>
                
                <div class="loading" id="loading-cham" style="display: none;">
                    <div class="spinner"></div>
                </div>
                
                <div id="cham-content">
                    {% if cham_data %}
                    <h4>
                        h√¢n t√≠ch ch·∫°m ({{ cham_data.date_range }})
                    </h4>
                    <div class="chart-container">
                        <canvas id="chamChart"></canvas>
                    </div>

                    <div class="strong-touch">
                        <h4>üî• Ch·∫°m m·∫°nh (theo ƒêB, >= 2 l·∫ßn)</h4>
                        {% if cham_data.cham %}
                        <ul>
                            {% for digit, info in cham_data.cham.items() %}
                            <li>
                                <strong>{{ digit }}</strong>: {{ info.count }} l·∫ßn 
                                (ng√†y v·ªÅ: {{ info.dates|join(", ") }})
                            </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                        <p>Kh√¥ng c√≥ ch·∫°m m·∫°nh trong 7 ng√†y g·∫ßn nh·∫•t.</p>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </section>

            <!-- T·ªîNG L√î -->
            <section id="tong_lo" class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-calculator"></i> Ph√¢n t√≠ch T·ªïng L√¥</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="tong_lo">
                    <button type="button" class="btn" onclick="analyze('tong_lo')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch T·ªïng L√¥</button>
                </form>
                
                <div class="loading" id="loading-tong_lo" style="display: none;">
                    <div class="spinner"></div>
                </div>
                
                <div id="tong_lo-content">
                    {% if tong_lo_data %}
                    {% set tong_lo_list = tong_lo_data.items()|list %}
                    {% for ngay, tong_data in tong_lo_list[:3] %}
                    <div style="margin-bottom: 40px;">
                        <h4>Ng√†y {{ ngay }}</h4>
                        {% if tong_data %}
                        <div class="chart-container">
                            <canvas id="chart_tong_{{ loop.index }}"></canvas>
                        </div>
                        {% else %}
                        <p>Kh√¥ng c√≥ t·ªïng n√†o trong ng√†y n√†y.</p>
                        {% endif %}
                    </div>
                    {% endfor %}
                    {% endif %}
                </div>
            </section>

            <!-- L√î R∆†I -->
            <section id="lo_roi" class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-sync-alt"></i> Ph√¢n t√≠ch L√¥ R∆°i</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="lo_roi">
                    <button type="button" class="btn" onclick="analyze('lo_roi')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch L√¥ R∆°i</button>
                </form>
                
                <div class="loading" id="loading-lo_roi" style="display: none;">
                    <div class="spinner"></div>
                </div>
                <div id="lo_roi-content">
                
                    {% if lo_roi_data %}
                        <!-- L√¥ r∆°i t·ª´ ƒêB -->
                        <h3>L√¥ r∆°i t·ª´ gi·∫£i ƒêB</h3>
                        <p>
                        Trong {{ lo_roi_data.db.count }} l·∫ßn x·∫£y ra ({{ lo_roi_data.db.from }} ‚Üí {{ lo_roi_data.db.to }}), 
                        trung b√¨nh {{ lo_roi_data.db.avg_gap }} ng√†y m·ªõi c√≥ m·ªôt l·∫ßn l√¥ r∆°i. 
                        L·∫ßn g·∫ßn nh·∫•t c√°ch ƒë√¢y {{ lo_roi_data.db.last_gap }} ng√†y. 
                        ‚Üí <b>X√°c su·∫•t ng√†y mai ‚âà {{ lo_roi_data.db.xac_suat }}%</b>.
                        </p>
                        <details>
                        <summary>Chi ti·∫øt c√°c l·∫ßn r∆°i</summary>
                        <ul>
                            {% for ct in lo_roi_data.db.chi_tiet %}
                            <li>{{ ct }}</li>
                            {% endfor %}
                        </ul>
                        </details>

                        <!-- L√¥ r∆°i t·ª´ nhi·ªÅu nh√°y -->
                        <h3>L√¥ r∆°i t·ª´ nhi·ªÅu nh√°y</h3>
                        <p>
                        Trong {{ lo_roi_data.nhieu_nhay.count }} l·∫ßn x·∫£y ra ({{ lo_roi_data.nhieu_nhay.from }} ‚Üí {{ lo_roi_data.nhieu_nhay.to }}), 
                        trung b√¨nh {{ lo_roi_data.nhieu_nhay.avg_gap }} ng√†y m·ªõi c√≥ m·ªôt l·∫ßn l√¥ r∆°i. 
                        L·∫ßn g·∫ßn nh·∫•t c√°ch ƒë√¢y {{ lo_roi_data.nhieu_nhay.last_gap }} ng√†y. 
                        ‚Üí <b>X√°c su·∫•t ng√†y mai ‚âà {{ lo_roi_data.nhieu_nhay.xac_suat }}%</b>.
                        </p>
                        <details>
                            <summary>Chi ti·∫øt c√°c l·∫ßn r∆°i</summary>
                            <ul>
                                {% for ct in lo_roi_data.nhieu_nhay.chi_tiet %}
                                <li>{{ ct }}</li>
                                {% endfor %}
                            </ul>
                        </details>

                        {% if lo_roi_data.ung_vien %}
                        <!-- ·ª®ng vi√™n l√¥ r∆°i -->
                        <h4>·ª®ng vi√™n l√¥ r∆°i ng√†y mai:</h4>
                        <ul>
                            {% for uv in lo_roi_data.ung_vien %}
                                <li>
                                    S·ªë <b>{{ uv.so }}</b>:
                                    t·ª´ng r∆°i {{ uv.so_roi }}/{{ uv.so_lan }} l·∫ßn 
                                    (‚âà {{ uv.ty_le }}%)
                                </li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    
                    {% elif action == 'lo_roi' %}
                        <p style="text-align:center;font-style:italic;">Kh√¥ng c√≥ d·ªØ li·ªáu l√¥ r∆°i.</p>
                    {% endif %}
                </div>
            </section>

            <!-- C·∫¶U NGANG -->
            <section id="cau_ngang" class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-arrows-alt-h"></i> Ph√¢n t√≠ch C·∫ßu Ngang</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="cau_ngang">
                    <button type="button" class="btn" onclick="analyze('cau_ngang')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch C·∫ßu Ngang</button>
                </form>
                
                <div class="loading" id="loading-cau_ngang" style="display: none;">
                    <div class="spinner"></div>
                </div>
                
                <div id="cau_ngang-content">
                    {% if cau_ngang %}
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">S·ªë c·∫ßu ngang t√¨m th·∫•y</div>
                            <div class="stat-value">{{ cau_ngang|length }}</div>
                            <div class="stat-desc">C·∫ßu ngang</div>
                        </div>
                    </div>
                    
                    <div class="grid-container">
                        {% for cau in cau_ngang %}
                        <div class="cell">
                            <div class="final-number">
                                <strong>{{ cau.final }}</strong>
                                <span style="font-size: 0.8em; color: #777;">/{{ cau.final }}</span>
                                <br>
                                <span style="font-size: 0.7em;">({{ cau.so_ngay }} ng√†y)</span>
                            </div>
                            <div class="detail-box">
                                <strong>Ngu·ªìn:</strong> {{ cau.source }}<br>
                                <strong>L·ªãch s·ª≠:</strong><br>
                                {% for date, pair in cau.history %}
                                <div style="margin-bottom: 2px;">
                                    {{ date }} ‚Üí {{ pair }}
                                </div>
                                {% endfor %}
                                {% if cau.so_ngay >= 2 %}
                                <div style="margin-top: 5px; color: green; font-weight: bold;">
                                    D·ª± ƒëo√°n: {{ cau.final }} c√≥ kh·∫£ nƒÉng v·ªÅ ng√†y ti·∫øp theo
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% elif action == 'cau_ngang' %}
                    <p style="text-align: center; font-style: italic;">Kh√¥ng t√¨m th·∫•y c·∫ßu ngang n√†o trong 7 ng√†y g·∫ßn nh·∫•t.</p>
                    {% endif %}
                </div>
            </section>

            <!-- C·∫¶U CH√âO -->
            <section id="cau_cheo" class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-arrows-alt"></i> Ph√¢n t√≠ch C·∫ßu Ch√©o</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="cau_cheo">
                    <button type="button" class="btn" onclick="analyze('cau_cheo')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch C·∫ßu Ch√©o</button>
                </form>
                
                <div class="loading" id="loading-cau_cheo" style="display: none;">
                    <div class="spinner"></div>
                </div>
                
                <div id="cau_cheo-content">
                    {% if cau_cheo_data %}
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">S·ªë c·∫ßu ch√©o t√¨m th·∫•y</div>
                            <div class="stat-value">{{ cau_cheo_data|length }}</div>
                            <div class="stat-desc">C·∫ßu ch√©o</div>
                        </div>
                    </div>
                    
                    <div class="grid-container">
                        {% for cap_so, cau_list in cau_cheo_data.items() %}
                        <div class="cell">
                            <a href="{{ url_for('thong_ke.chi_tiet_cau_cheo', cap_so=cap_so) }}" 
                            class="so-cau" 
                            style="display: block; text-decoration: none; color: inherit;">
                                <div class="so-chinh">{{ cap_so }}</div>
                                <div class="so-luong">{{ cau_list|length }} c·∫ßu</div>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    {% elif action == 'cau_cheo' %}
                    <p style="text-align: center;">Kh√¥ng t√¨m th·∫•y c·∫ßu ch√©o n√†o.</p>
                    {% endif %}
                </div>
            </section>

            <!-- PH√ÇN T√çCH THEO TH·ª® -->
            <section id="phan_tich_thu" class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-calendar"></i> Ph√¢n t√≠ch theo Th·ª©</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="phan_tich_thu">
                    <button type="button" class="btn" onclick="analyze('phan_tich_thu')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch theo Th·ª©</button>
                </form>
                
                <div class="loading" id="loading-phan_tich_thu" style="display: none;">
                    <div class="spinner"></div>
                </div>
                
                <div id="phan_tich_thu-content">
                    {% if phan_tich_thu_data %}
                    <div style="max-width: 1000px; margin: 0 auto; padding: 20px;">
                        {% for thu, data in phan_tich_thu_data.items() %}
                        <div style="background: #f8f9fa; border-radius: 10px; padding: 15px; margin: 10px 0; border-left: 4px solid #007bff;">
                            <h3 style="margin: 0 0 10px 0; color: #2c3e50;">{{ thu }} ({{ data.tong_so_ngay }} ng√†y d·ªØ li·ªáu)</h3>
                            
                            {% if data.top_3 %}
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                {% for item in data.top_3 %}
                                <div style="background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div style="font-size: 1.5em; font-weight: bold; color: #e74c3c; text-align: center;">
                                        {{ item.so }}
                                    </div>
                                    <div style="text-align: center; color: #7f8c8d; font-size: 0.9em;">
                                        {{ item.xac_suat }}% ({{ item.so_lan }}/{{ data.tong_so_ngay }})
                                    </div>
                                    <div style="font-size: 0.8em; color: #95a5a6; margin-top: 5px;">
                                        {% for ngay in item.ngay_ve %}
                                        {{ ngay }}{% if not loop.last %}, {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <p style="color: #7f8c8d; font-style: italic;">Kh√¥ng c√≥ d·ªØ li·ªáu</p>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                    {% elif action == 'phan_tich_thu' %}
                    <p style="text-align: center; color: #7f8c8d;">Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ ph√¢n t√≠ch.</p>
                    {% endif %}
                </div>
            </section>

            <!-- L·∫∂P ƒê·ªÄU -->
            <section id="lap_deu" class="section">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-redo"></i> Ph√¢n t√≠ch L·∫∑p ƒê·ªÅu</h2>
                </div>
                
                <form method="POST" class="analysis-form">
                    <input type="hidden" name="action" value="lap_deu">
                    <button type="button" class="btn" onclick="analyze('lap_deu')"><i class="fas fa-sync"></i> Ph√¢n t√≠ch L·∫∑p ƒê·ªÅu</button>
                </form>
                
                <div class="loading" id="loading-lap_deu" style="display: none;">
                    <div class="spinner"></div>
                </div>
                
                <div id="lap_deu-content">
                    {% if lap_deu_data %}
                    <div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            {% for so, data in lap_deu_data.items() %}
                            <div style="background: white; border-radius: 10px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <span style="font-size: 1.8em; font-weight: bold; color: #e74c3c;">{{ so }}</span>
                                    <span style="background: #3498db; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.9em;">
                                        {{ data.so_lan }} l·∫ßn
                                    </span>
                                </div>
                                
                                <div style="margin-bottom: 10px;">
                                    <strong>Chu k·ª≥:</strong> 
                                    {% for pattern in data.patterns %}
                                    <span style="background: #2ecc71; color: white; padding: 2px 6px; border-radius: 8px; margin: 0 2px; font-size: 0.9em;">
                                        {{ pattern.chu_ky }} ng√†y ({{ pattern.do_chinh_xac }}%)
                                    </span>
                                    {% endfor %}
                                </div>
                                
                                <div style="font-size: 0.9em; color: #7f8c8d;">
                                    <strong>L·ªãch s·ª≠:</strong><br>
                                    {% for ngay in data.lich_su[-5:] %}
                                    <span style="background: #f8f9fa; padding: 2px 6px; border-radius: 4px; margin: 2px; display: inline-block;">
                                        {{ ngay }}
                                    </span>
                                    {% endfor %}
                                    {% if data.lich_su|length > 5 %}
                                    <span style="color: #95a5a6;">... (+{{ data.lich_su|length - 5 }} ng√†y)</span>
                                    {% endif %}
                                </div>
                                
                                <div style="margin-top: 10px; font-size: 0.8em; color: #27ae60;">
                                    <strong>Ng√†y g·∫ßn nh·∫•t:</strong> {{ data.ngay_gan_nhat }}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% elif action == 'lap_deu' %}
                    <p style="text-align: center; color: #7f8c8d;">Kh√¥ng t√¨m th·∫•y s·ªë n√†o c√≥ chu k·ª≥ l·∫∑p ƒë·ªÅu.</p>
                    {% endif %}
                </div>
            </section>
        </main>
    </div>
    <button type="button" onclick="window.location.href='/'">Quay l·∫°i trang ch·ªß</button>
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="disclaimer">
                    <i class="fas fa-exclamation-triangle"></i> 
                    <strong>L∆∞u √Ω:</strong> Th√¥ng tin tr√™n trang web ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o, 
                    ch√∫ng t√¥i kh√¥ng ch·ªãu tr√°ch nhi·ªám cho b·∫•t k·ª≥ quy·∫øt ƒë·ªãnh n√†o d·ª±a tr√™n th√¥ng tin n√†y. 
                    X·ªï s·ªë l√† h√¨nh th·ª©c gi·∫£i tr√≠ may r·ªßi, h√£y ch∆°i c√≥ tr√°ch nhi·ªám.
                </div>
                <div>¬© 2023 Ph√¢n T√≠ch SXMB. All rights reserved.</div>
            </div>
        </div>
    </footer>

    <script>
        // Hi·ªÉn th·ªã ng√†y hi·ªán t·∫°i
        const now = new Date();
        document.getElementById('current-date').textContent = now.toLocaleDateString('vi-VI', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        // Chuy·ªÉn ƒë·ªïi gi·ªØa c√°c ph·∫ßn
        function showSection(sectionId) {
            // ·∫®n t·∫•t c·∫£ c√°c ph·∫ßn
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // B·ªè active t·∫•t c·∫£ c√°c n√∫t
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Hi·ªÉn th·ªã ph·∫ßn ƒë∆∞·ª£c ch·ªçn
            document.getElementById(sectionId).classList.add('active');
            
            // Active n√∫t ƒë∆∞·ª£c ch·ªçn
            document.querySelector(`.tab-btn[onclick="showSection('${sectionId}')"]`).classList.add('active');

            // L∆∞u tab hi·ªán t·∫°i
            localStorage.setItem("activeTab", sectionId);

            // Cu·ªôn l√™n ƒë·∫ßu trang
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        // Khi load l·∫°i trang ‚Üí m·ªü tab ƒë√£ l∆∞u
        window.addEventListener("load", () => {
            const savedTab = localStorage.getItem("activeTab") || "cham";
            showSection(savedTab);
        });
        // H√†m gi·∫£ l·∫≠p ph√¢n t√≠ch d·ªØ li·ªáu
        function analyze(section) {
            const loadingEl = document.getElementById(`loading-${section}`);
            const contentEl = document.getElementById(`${section}-content`);
            
            // Hi·ªÉn th·ªã loading
            loadingEl.style.display = 'flex';
            
            // Gi·∫£ l·∫≠p th·ªùi gian ph√¢n t√≠ch
            setTimeout(() => {
                // ·∫®n loading
                loadingEl.style.display = 'none';
                
                // ·ªû ƒë√¢y s·∫Ω l√† code g·ª≠i form th·ª±c s·ª±
                // Trong demo n√†y, ch√∫ng ta ch·ªâ gi·∫£ l·∫≠p
                document.querySelector(`form input[name="action"][value="${section}"]`).closest('form').submit();
            }, 1000);
            
            // NgƒÉn form submit m·∫∑c ƒë·ªãnh
            return false;
        }

        // Kh·ªüi t·∫°o bi·ªÉu ƒë·ªì n·∫øu c√≥ d·ªØ li·ªáu
        document.addEventListener('DOMContentLoaded', function() {
            {% if cham_data %}
            const ctx = document.getElementById('chamChart').getContext('2d');
            const chamChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: {{ cham_data.chart.labels|tojson }},
                    datasets: [{
                        label: 'S·ªë l·∫ßn xu·∫•t hi·ªán',
                        data: {{ cham_data.chart.data|tojson }},
                        backgroundColor: [
                            '#16a085', '#2980b9', '#8e44ad', '#e74c3c', '#f39c12',
                            '#d35400', '#c0392b', '#27ae60', '#2c3e50', '#7f8c8d'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Bi·ªÉu ƒë·ªì t·∫ßn su·∫•t Ch·∫°m',
                            font: { size: 16 }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'S·ªë l·∫ßn xu·∫•t hi·ªán'
                            }
                        }
                    }
                }
            });
            {% endif %}
            
            {% if tong_lo_data %}
            {% set tong_lo_list = tong_lo_data.items()|list %}
            {% for ngay, tong_data in tong_lo_list[:3] %}
            {% if tong_data %}
            const ctx{{ loop.index }} = document.getElementById('chart_tong_{{ loop.index }}').getContext('2d');
            new Chart(ctx{{ loop.index }}, {
                type: 'bar',
                data: {
                    labels: {{ tong_data.keys()|list }},
                    datasets: [{
                        label: 'T·ªïng s·ªë l·∫ßn',
                        data: {{ tong_data.values()|list }},
                        backgroundColor: [
                            '#16a085', '#2980b9', '#8e44ad', '#e74c3c', '#f39c12',
                            '#d35400', '#c0392b', '#27ae60', '#2c3e50', '#7f8c8d'
                        ],
                        borderColor: 'rgba(255, 159, 64, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0,
                                stepSize: 1
                            }
                        }
                    }
                }
            });
            {% endif %}
            {% endfor %}
            {% endif %}
            
        });
    </script>
</body>
</html>